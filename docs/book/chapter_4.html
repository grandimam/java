<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Exceptions</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="chapter_1.html"><strong aria-hidden="true">1.</strong> Basics</a></li><li class="chapter-item expanded "><a href="chapter_2.html"><strong aria-hidden="true">2.</strong> Collections</a></li><li class="chapter-item expanded "><a href="chapter_3.html"><strong aria-hidden="true">3.</strong> Concurrency</a></li><li class="chapter-item expanded "><a href="chapter_4.html" class="active"><strong aria-hidden="true">4.</strong> Exceptions</a></li><li class="chapter-item expanded "><a href="chapter_5.html"><strong aria-hidden="true">5.</strong> Generics</a></li><li class="chapter-item expanded "><a href="chapter_6.html"><strong aria-hidden="true">6.</strong> IO</a></li><li class="chapter-item expanded "><a href="chapter_7.html"><strong aria-hidden="true">7.</strong> Streams</a></li><li class="chapter-item expanded "><a href="chapter_8.html"><strong aria-hidden="true">8.</strong> OOPS</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p>Exceptions are abnormal behaviors during the execution of the program. Exceptions are just objects with all of them 
extending from Throwable. Errors are unrecoverable conditions such as OOM, Memory leaks, etc. </p>
<pre><code>              ---&gt; Throwable &lt;--- 
              |    (checked)     |
              |                  |
              |                  |
      ---&gt; Exception           Error
      |    (checked)        (unchecked)
      |
RuntimeException
  (unchecked)
</code></pre>
<p>There are three main categories of exceptions - </p>
<ul>
<li>
<p>Checked exceptions</p>
</li>
<li>
<p>Unchecked exceptions / Runtime Exceptions</p>
</li>
<li>
<p>Errors</p>
</li>
</ul>
<p>If a client can reasonably be expected to recover from an exception, make it a checked exception. If a client cannot do 
anything to recover from the exception, make it an unchecked exception. For example, before we open a file, we can first
validate the input file name. If the user input file name is invalid, we can throw a custom checked exception: </p>
<pre><code class="language-java">if (!isCorrectFileName(fileName)) {
    throw new IncorrectFileNameException(&quot;Incorrect filename : &quot; + fileName );
}
</code></pre>
<p>In this way, we can recover the system by accepting another user input file name. However, if the input file name is a 
null pointer or it is an empty string, it means that we have some errors in the code. In this case, we should throw an 
unchecked exception:</p>
<pre><code class="language-java">if (fileName == null || fileName.isEmpty())  {
    throw new NullOrEmptyException(&quot;The filename is null or empty.&quot;);
}
</code></pre>
<p><strong>Checked</strong></p>
<p>Checked exceptions are exceptions that are outside the control of our program, and the compiler requires us to handle by
either throwing the exception up the call stack or catching it. We can use the throws keyword to declare a checked exception. </p>
<p>Eg. IOException, ServletException. </p>
<p><strong>Unchecked</strong></p>
<p>Unchecked exceptions are exceptions that represents some error in the program logic. The compiler does not handle these 
exceptions, and we do not have to declare the exception using the throws keyword. Exceptions that extends RuntimeException
is unchecked.</p>
<p>Eg. NullPointerException, IllegalArgumentException.</p>
<p><strong>Errors</strong></p>
<p>Errors are irrecoverable conditions like library incompatability, memory leaks, recursion, etc. They are also unchecked 
exception even though it is not runtime. </p>
<p>Eg. StackOverflowError, OutOfMemoryError.</p>
<p><strong>Throw vs Throws</strong></p>
<p>Throw is used to throw the exception up the call stack. Throws is a keyword used next to the method to highlight that 
method throws an exception. </p>
<h2 id="handling-exceptions"><a class="header" href="#handling-exceptions">Handling Exceptions</a></h2>
<p><strong>Throws</strong></p>
<p>Simple way is to throw it. </p>
<pre><code class="language-java">public int getPlayerScore(String playerFile) throws FileNotFoundException {

    Scanner contents = new Scanner(new File(playerFile));
    return Integer.parseInt(contents.nextLine());
}
</code></pre>
<p>FileNotFoundException is a checked exception but anyone using our method must handle it. Also, <em>parseInt</em> can throw a <em>NumberFormatException</em>, but because it is unchecked, we aren't required to handle it.</p>
<p><strong>Try-catch</strong></p>
<p>To handle the exception ourselves we can just use the try-catch block. </p>
<pre><code>public int getPlayerScore(String playerFile) {
    try {
        Scanner contents = new Scanner(new File(playerFile));
        return Integer.parseInt(contents.nextLine());
    } catch (FileNotFoundException noFile) {
        throw new IllegalArgumentException(&quot;File not found&quot;);
    }
}
</code></pre>
<p><strong>Finally</strong></p>
<p>Finally keyword is used to execute the code regardless whether an exception occurs and not. Even if a <em>FileNotFoundException</em> is thrown up the call stack, Java will call the contents of <em>finally</em> before doing that. We can also both handle the exception <em>and</em> make sure that our resources get closed:</p>
<pre><code class="language-java">public int getPlayerScore(String playerFile)
  throws FileNotFoundException {
    Scanner contents = null;
    try {
        contents = new Scanner(new File(playerFile));
        return Integer.parseInt(contents.nextLine());
    } finally {
        if (contents != null) {
            contents.close();
        }
    }
}

// exception is both handled and finally is executed
public int getPlayerScore(String playerFile) {
    Scanner contents;
    try {
        contents = new Scanner(new File(playerFile));
        return Integer.parseInt(contents.nextLine());
    } catch (FileNotFoundException noFile ) {
        logger.warn(&quot;File not found, resetting score.&quot;);
        return 0; 
    } finally {
        try {
            if (contents != null) {
                contents.close();
            }
        } catch (IOException io) {
            logger.error(&quot;Couldn't close the reader!&quot;, io);
        }
    }
}
</code></pre>
<p><strong>try-with-resources</strong></p>
<p>It allows us to declare resources to be used in a try-block with assurance that the resources will be closed after the execution of the block. Then, we can add the finally block to do other type of clean up. </p>
<pre><code class="language-java">public int getPlayerScore(String playerFile) {
    try (Scanner contents = new Scanner(new File(playerFile))) {
      return Integer.parseInt(contents.nextLine());
    } catch (FileNotFoundException e ) {
      logger.warn(&quot;File not found, resetting score.&quot;);
      return 0;
    }
}
</code></pre>
<p>Using multiple resources in:</p>
<pre><code class="language-java">try (Scanner scanner = new Scanner(new File(&quot;testRead.txt&quot;));
    PrintWriter writer = new PrintWriter(new File(&quot;testWrite.txt&quot;))) {
    while (scanner.hasNext()) {
    writer.print(scanner.nextLine());
    }
}
</code></pre>
<p>Using custom autocloseable resource:</p>
<pre><code class="language-java">public class MyResource implements AutoCloseable {
    @Override
    public void close() throws Exception {
        System.out.println(&quot;Closed MyResource&quot;);
    }
}
</code></pre>
<p>We can also use final variables inside the try-with-resource block.</p>
<h2 id="throwing-exceptions"><a class="header" href="#throwing-exceptions">Throwing Exceptions</a></h2>
<p>If we do not want to handle the exceptions or want to generate our own exceptions for others to handle we can use the throw keyword. </p>
<pre><code class="language-java">public class TimeoutException extends Exception {
    public TimeoutException(String message) {
        super(message);
    }
}
</code></pre>
<p><strong>Checked Exception</strong></p>
<p>Throwing a checked exception is as simple as using the throw keyword</p>
<pre><code class="language-java">public List&lt;Player&gt; loadAllPlayers(String playersFile) throws TimeoutException {
    while ( !tooLong ) {
        // ... potentially long operation
    }
    throw new TimeoutException(&quot;This operation took too long&quot;);
}
</code></pre>
<p><strong>Unchecked Exception</strong></p>
<p>We do not have to mark the method for unchecked exception. </p>
<pre><code class="language-java">public List&lt;Player&gt; loadAllPlayers(String playersFile) {
    if(!isFilenameValid(playersFile)) {
        throw new IllegalArgumentException(&quot;Filename isn't valid!&quot;);
    }
}
</code></pre>
<p>If the only possible exception that a given block of code could raise are unchecked exceptions then we can catch and rethrow Throwable or Exception without adding the method signature. </p>
<pre><code class="language-java">public List&lt;Player&gt; loadAllPlayers(String playersFile) {
    try {
        throw new NullPointerException();
    } catch (Throwable t) {
        throw t;
    }
}
</code></pre>
<h2 id="exception-handling-and-overriding"><a class="header" href="#exception-handling-and-overriding">Exception Handling and Overriding</a></h2>
<ul>
<li>If SuperClass does not declare an exception, then the SubClass can only declare unchecked exceptions, but not the checked exceptions.</li>
<li>If SuperClass declares an exception, then the SubClass can only declare the same or child exceptions of the exception declared by the SuperClass and any new Runtime Exceptions, just not any new checked exceptions at the same level or higher.</li>
<li>If SuperClass declares an exception, then the SubClass can declare without exception.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="chapter_3.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="chapter_5.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="chapter_3.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="chapter_5.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
